## 点对点链路和广播链路
网络链路中常见的两种类型为`点对点链路`和`广播链路`.

#### 点对点链路
==点对点链路==是指: 链路一端的==单个发送方==和链路另一端的==单个接收方==组成的链路

相应的协议有点对点协议(point-to-point protocol, PPP). 

#### 广播链路
📣  ==广播==是指: 链路中任何一个节点传输一个帧时, 信道广播该帧, 信道中每个其他节点都收到一个副本.

[[以太网]] 和 无线局域网 都是广播链路的例子.

广播链路的适用范围很广, 但需要解决一个棘手的问题---==多路访问问题(multiple access problem)==

## 多路访问问题
以咖啡聊天室为例类比广播链路是十分合适的.

在任何时候, 一个聊天室仅允许一个人说话, 如果有两个人同时说话, 两个人的声音纠缠在一起, 其他人将听不清任何一个人说话的信息. 在广播链路中, 这种情况称为 ==碰撞== , 当碰撞发生时, 没有一个接受节点能够有效的获得任何传输的帧.

⭐⭐⭐  因此多路访问问题的中心问题是: 确定谁以及在什么时候获得说话的权利.

### 多路访问问题解决方案的分类
有三种类型:
- 信道划分协议
- 随机接入协议
- 轮流协议

### 信道划分协议
#### 时分多路复用(TDM)
TDM 将时间划分为时间帧, 进一步的划分每个时间帧为 N 个时隙.
编号为 i 的节点只能在编号同为 i 的时隙发送数据.

TDM有效避免了碰撞, 但是效率很低, 如果信道传输速率为 R, 那么经过 TDM 后, 传输速率会降低为 R/N, 节点越多下降越多, 这是没有办法接受的.

#### 频分多路复用(FDM)
FDM 和 TDM 相似, TDM 分隔时域, 而FDM分隔频域.
效率和 TDM 是一样的, 速率也会下降到 R/N

#### 码分多址 (CDMA)
CDMA应用很广, 即使多个节点同时发送信息, 也不会造成碰撞, CDMA在蜂窝电话中常常使用.

### 随机接入协议
#### ALOHA
前提
- 帧由 L 位组成
- 时间被划分为 L /  R 的时隙
- 节点只在时隙起点开始传输
- 节点是同步的
- 如果一个时隙中出现了碰撞, 所有节点都会在该时隙结束之前知道该碰撞事件

操作流程
- 当节点有数据帧要发送, 等到下一个时隙开始传输整个帧
- 如果没有碰撞, 则成功传输, 不考虑重传
- 如果碰撞了, 该节点以 p 的概率在后续的时隙中重传, 知道传输成功.

效率
时隙ALOHA的效率只有 37%

#### ⭐⭐⭐⭐⭐  CSMA / CD
具有碰撞检测的载波侦听多路访问(Carrier Sensing Multiple Access with Collision Detection, CSMA/CD).

CSMA / CD 基于两个基本规则:
- ==说话之前先听== 如果其他人正在说话, 等到他们说完话为止. 这被称为==载波侦听==
- ==如果与他人同时开始说话, 停止说话== 这被称为==碰撞检测==


**问题:** 关于 CSMA 的第一个问题是: 如果所有节点都进行载波侦听了, 为什么会发生碰撞? 
**解答:** 还是以上面的咖啡聊天室为例, 根具物理知识我们知道, 声音在空气中传播的速度是 340m/s , 当一个人B开始说话的时候, 声音可能还没有传播到另一个人A的耳朵里, 而A以为此时没有人说话(实际上是有的, 只不过没传播到这里), 于是A也开始说话了, 从而导致A和B的碰撞. 总结来说, 由于信道里的传播是会有==延时==的, 从而导致载波侦听不会总是正确.

上面的例子使用声音的传播作为例子可能不太实际, 但在计算机的世界里, 信息传播的速度会受到很多因素影响, 就算是光纤, 也是有速度极限的, 而且光纤里的光的传播速度并不是真光速, 而只有光速的 70% 左右(自然杂志的结论).


##### CSMA / CD 的效率:
该方法的效率与==信道传播时延==有关, 时延趋近于0的时候, 效率为100%.
另外, 还有网络带宽有关, 带宽越大, 效率越高.

### 轮流协议
#### 轮询协议
#### 令牌传递协议