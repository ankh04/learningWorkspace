先回顾下各个网络层次里的地址

- 应用层 ---> 域名, 邮箱地址等
- 传输层 ---> ip地址
- 链路层 ---> MAC地址

## 链路层地址 --- MAC
MAC 地址被写入到网络适配器中(掉电不失去). 

MAC 地址长 48 位, 即 6 字节.
常常用一个两位十六进制的数表示一个字节, 这样一个典型的 MAC 地址可以表示为: `FF-FF-FF-FF-FF-FF`

前 24 位由国际组织分配, 后 24 位由生产厂家分配.

MAC 地址可以通过软件改变.

#### 与IP地址的不同
MAC 地址具有==扁平结构==. 这意味着无论适配器到哪里, 地址都不会变化.
IP 地址具有==层次结构==. 在不同的网络架构中, 会有不同的层次, 比如学校和公司的网络就属于两个不同的层次, 处于不同网络层次的PC将具有不同的 IP.

从生活角度类比的话, MAC 地址就像是身份证号, 无论到哪个地方都不会变化, 而 IP 地址就像是邮政编码, 换一个地方就换换一个邮政编码.

## 地址解析协议 --- ARP
ARP (Address Resolution Protocol, ARP)是 IP 地址和 MAC 地址之间进行转换的协议.

#### ARP协议的输入与输出
输入:  ==相同局域网==上的任何IP地址
输出: 对应的 MAC 地址

ARP 模块将取在==相同局域网==上的任何IP地址作为输入, 然后返回相应的 MAC 地址

#### ARP表
怎样通过一个IP地址得到对应的 MAC 地址的呢?
每台主机或路由器都维护了一张==ARP表==, 这张表保存了 IP 地址 到 MAC 地址的==映射关系==, 通常该表还会有一个==寿命(TTL)==值, 当时间过了TTL, 就会从ARP表中删除该信息.

如果 ARP 表收到了查找未记录的 IP 地址的 MAC 地址的请求, 这种情况下, 会构造一个称为**ARP分组**的特殊分组, 发出 ARP 查询分组, 这个查询会==广播==到链路中, 若链路中有节点比对成功, 就会返回自己的 MAC 地址.

#### 跨越传输层和链路层的协议 ARP
可以发现 ARP 中既有传输层的 IP 地址 又有链路层的 MAC 地址, 所以可以把 ARP 看成跨越传输层和链路层两边的协议.
