## 差错检测的分类
主要有三种技术:
- 奇偶校验
- 检验和(传输层常用)
- 循环冗余检测(链路层常用)

## 奇偶校验
奇偶校验是最简单的差错检测.
对于一个 N 位的数据, 只需要加上一个附加的校验位.

#### 奇偶校验规则
如果传输数据中1的个数是奇数, 校验位为1
如果传输数据中1的个数是偶数, 校验位为0

#### 奇偶校验的缺点
可以发现, 如果传输数中有==偶数==个差错, 奇偶校验将失效.

如果每个位发生差错的概率是==独立的==, 在一个分组中多个比特位同时出错的概率会很小, 在这种情况下一个分组一个校验位或许是足够的.

但是实际场景中的错误往往不是独立的, 差错往往是==聚集==的, 因此单个奇偶校验其实并不适合实际通信场景.

### 二维奇偶校验
为了应对上述单个奇偶校验的缺点, 可以考虑使用==二维的==奇偶校验.

二维奇偶校验甚至能够定位错误发生的位置. 

## 校验和
将传输数据加起来, 作为校验位.

## 循环冗余检测
循环冗余检测(Cyclic Redundancy Check, CRC) 编码将数据看作系数是 0 和 1 的多项式, 比如对于数据 `1011`, CRC看作成:
$$
1\times x^3 + 0 \times x^2 + 1 \times x^1 + 1 \times x^0
$$
#### CRC 规则
首先规定一个==生成多项式==(generator) G (r + 1位),  生成多项式是发送方和接收方都知道的信息
把要传输的数据左移 r 位, 用左移的到的数据除以 G(使用[[模2运算]]), 得到的余数(r 位)就是校验位.

接受方收到数据后, 将该数据除以生成多项式G, 如果能被整除, 说明没有错误.

#### 国际标准规定的生成多项式
国际标准规定了8, 12, 16, 32位的生成多项式.
32 为是链路层 IEEE 协议使用的:
$$
G_{CRC-32}=100000100110000010001110110110111
$$

## 为什么传输层使用校验和 而 链路层使用CRC?
因为传输层是由软件实现的, 需要校验和这样==简单快速==的检测方案.
而链路层的差错检测是由硬件实现的, 适合使用更复杂的 CRC 操作.