## 什么是运行时存储空间?
程序运行时的数据需要进行有效的组织, 具体来说, 可能需要满足:
- 对于局部变量, 在需要的时候进行创建, 在不需要时进行回收
- 不同过程(函数/方法)之间对于变量的引用需要明确

## 在设计运行时存储空间时需要考虑哪些问题?
- 过程(函数/方法)是否允许嵌套
- 过程是否可以作为参数传递(函数式编程)
- 存储空间是否可以动态分配
- 存储空间是否需要显示释放


## 存储分配有哪两种策略? 分别有什么特点?
- 静态分配策略
	- 在编译时确定数据空间大小, 并为每个数据项确定运行时空间的位置
	- **代表语言:** FORTRAN
- 动态分配策略
	- 在编译时不能确定数据空间大小
	- 允许递归过程
	- 允许栈式分配内存, 堆式分配内存
	- **代表语言:** PASCAL C/C++

## 程序在运行时的内存分配是什么样的? 局部变量是分配在哪部分的?
内存分配如下图所示
![](https://picture-bed-1301848969.cos.ap-shanghai.myqcloud.com/20220616202336.png)

局部变量/形式变量/临时工作单元作为**活动记录**存放在==栈==中

## 活动记录是什么? 活动记录包括哪些内容?
活动记录是调用一个过程时往栈中存放的存储空间

如果是**非嵌套过程**, 一个活动记录会是下面的样子:
![](https://picture-bed-1301848969.cos.ap-shanghai.myqcloud.com/20220616205211.png)

如果编程语言允许嵌套过程, 即允许在过程中定义过程, 就会出现稍复杂的活动记录, 我们称为**嵌套过程活动记录**

## 嵌套过程如何访问外部的变量? 什么是闭包?
如果需要在嵌套过程中访问外部的变量, 需要更复杂的活动记录, 有两种实现方法:
- 静态链
- 嵌套层次显示表

==静态链==
会在活动记录中预留*一个位*用来存放*上一层*的SP位置

==嵌套层次显示表==
会在活动记录中开辟*一块空间*, 用来存放上一层中层数数量的SP位置
