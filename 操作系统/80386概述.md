## 80386的运行模式
80386有四种运行模式:
- 实模式
- 保护模式
- SMM模式
- 虚拟8086模式

### 实模式
这种状态下可访问的物理内存空间不会超过1MB, 且无法发挥4GB的内存管理能力

### 保护模式
- 支持内存分页机制, 并且提供了虚拟内存的支持
- 支持多任务, 还支持优先级, 优先级分为0~34个级别

## 80386的内存架构
通过==地址==访问内存空间, 地址是内存空间的==索引==
80386是32位的处理器, 可寻址的物理内存空间为$2^32=4G$字节

地址分为:
- 物理地址
- 线性地址
- 逻辑地址

### 不同地址之间的关系
- 若段机制启动、页机制未启动: 逻辑地址 -> 段机制处理 ->线性地址 = 物理地址
- 若段机制和页机制都启动: 逻辑地址 -> 段机制处理 -> 线性地址 -> 页机制处
- 理 -> 物理地址


## 80386的寄存器
80386的寄存器可以分为8组:
- 通用寄存器
- 段寄存器
- 指令指针寄存器
- 标志寄存器
- 控制寄存器
- 系统地址寄存器
- 调试寄存器
- 测试寄存器
后面三个寄存器 `系统地址寄存器`,`调试寄存器`,`测试寄存器`是开发操作系统会用(而开发应用程序一般不会用).

### 通用寄存器
 EAX:累加器
 EBX:基址寄存器
 ECX:计数器
 EDX:数据寄存器
 ESI: 源地址指针寄存器
 EDI:目的地址指针寄存器
 EBP:基址指针寄存器
 ESP:堆栈指针寄存器

### 段寄存器
 CS:代码段(Code Segment)
DS:数据段(Data Segment)
ES:附加数据段(Extra Segment)
SS:堆栈段(Stack Segment)
FS:附加段
GS:附加段

### 指令寄存器和标志寄存器
- EIP:指令寄存器
EIP的低16位就是8086的IP,它存储的是下一条要执行指令
的内存地址,在分段地址转换中,表示指令的段内偏移地址。
- EFLAGS:标志寄存器
IF(Interrupt Flag):中断允许标志位,由CLI STI两条指令
来控制;设置IF使CPU可识别外部(可屏蔽)中断请求。复位
IF 则禁止中断。IF对不可屏蔽外部中断和故障中断的识别没
有任何作用。
CF,PF,ZF,…